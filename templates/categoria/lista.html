{% extends "layout.html" %}
{% load static %}

{% block contenedor %}
{% load static %}
<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Lista de Categorías</title>
        <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.css' %}">
    </head>
    <body class="container mt-5">
        <div class="container" style="max-width: 70%; margin: auto;">
            <h1 class="mb-4">Listado de Categorías</h1>
        </div>

        <div class="container" style="max-width: 70%; margin: auto;">
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Descripción</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for categoria in categorias %}
                        <tr>
                            <td>{{ categoria.id }}</td>
                            <td>{{ categoria.descripcion }}</td>
                            <td>
                                <a href="{% url 'editar_categoria' categoria.pk %}" class="btn btn-sm btn-warning">Editar</a>
                                <a href="{% url 'eliminar_categoria' categoria.pk %}" class="btn btn-sm btn-danger">Eliminar</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="container" style="max-width: 70%; margin: auto;">
            <div class="mt-4">            
                <form method="get" class="d-flex align-items-center gap-2" role="search">
                    <a href="{% url 'crear_categoria' %}" class="btn btn-success">Crear nueva categoría</a>
                    <input type="text" name="search" class="form-control form-control-sm" style="max-width: 200px;" placeholder="Buscar categoría..." value="{{ request.GET.search }}">                
                    <input type="hidden" name="order" value="{{ request.GET.order|default:'asc' }}">                
                    <button class="btn btn-sm btn-outline-success" type="submit">Filtrar</button>

                    <a href="?order={% if request.GET.order == 'desc' %}asc{% else %}desc{% endif %}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}" class="btn btn-sm btn-outline-primary">
                        Ordenar {% if request.GET.order == 'desc' %}↑{% else %}↓{% endif %}
                    </a>
                </form>
            </div>
        </div>

        
    </body>
</html>

{% endblock %}    